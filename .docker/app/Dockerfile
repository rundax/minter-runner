ARG DOCKER_SERVER_HOST
ARG DOCKER_SERVER_PORT
ARG DOCKER_PROJECT_PATH
ARG DOCKER_NODE_VERSION
ARG DOCKER_IMAGE_VERSION=master

FROM ${DOCKER_SERVER_HOST}:${DOCKER_SERVER_PORT}/${DOCKER_PROJECT_PATH}/node${DOCKER_NODE_VERSION}-base:${DOCKER_IMAGE_VERSION} as code

WORKDIR /app
COPY package.json /app
COPY yarn.lock /app
RUN yarn install --cache-folder /yarn_cache; rm -rf /yarn_cache

COPY . /app
RUN yarn build-dev
